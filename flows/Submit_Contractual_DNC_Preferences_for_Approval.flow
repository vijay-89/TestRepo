<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Submit_DNC_Preferences_for_Approval</name>
        <label>Submit DNC Preferences for Approval</label>
        <locationX>155</locationX>
        <locationY>395</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>DNC_Request_Created</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Screen</targetReference>
        </faultConnector>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>DNCPreferencesID</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <elementReference>Approval_ID_2</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>DNCPreferencesID</assignToReference>
            <name>entityId</name>
        </outputParameters>
    </actionCalls>
    <decisions>
        <name>Already_submitted_for_Approval</name>
        <label>Already submitted for Approval?</label>
        <locationX>151</locationX>
        <locationY>84</locationY>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>PendingYes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DNCStatus</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Pending Approval</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Already_Submitted_for_Approval1</targetReference>
            </connector>
            <label>PendingYes</label>
        </rules>
        <rules>
            <name>PendingNo</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DNCStatus</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Pending Approval</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>DNC_Preference_has_Attachment</targetReference>
            </connector>
            <label>PendingNo</label>
        </rules>
    </decisions>
    <decisions>
        <name>DNC_Preference_has_Attachment</name>
        <label>DNC Preference has Attachment?</label>
        <locationX>151</locationX>
        <locationY>230</locationY>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>AttachmentYes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DNCAttachmentCount1</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Submit_DNC_Preferences_for_Approval</targetReference>
            </connector>
            <label>AttachmentYes</label>
        </rules>
        <rules>
            <name>AttachmentNo</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DNCAttachmentCount</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Require_Attachment</targetReference>
            </connector>
            <label>AttachmentNo</label>
        </rules>
    </decisions>
    <interviewLabel>Submit Contractual DNC Preferences for Approval {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Submit Contractual DNC Preferences for Approval</label>
    <processType>Flow</processType>
    <screens>
        <name>Already_Submitted_for_Approval1</name>
        <label>Already Submitted for Approval</label>
        <locationX>445</locationX>
        <locationY>79</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>AlreadySubmitted</name>
            <fieldText>Your DNC Preferences have already been submitted for Approval.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>DNC_Request_Created</name>
        <label>DNC Request Created</label>
        <locationX>155</locationX>
        <locationY>547</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>DNCRequestCreatedText_0_1</name>
            <fieldText>&lt;DIV ALIGN=&quot;LEFT&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Your DNC Preferences have successfully been submitted for Approval.&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Fault_Screen</name>
        <label>Fault Screen</label>
        <locationX>431</locationX>
        <locationY>401</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>FaultText_0</name>
            <fieldText>Something went wrong with this Flow: {!$Flow.FaultMessage} 

Your admin has received an email about this error.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Require_Attachment</name>
        <label>Require Attachment</label>
        <locationX>435</locationX>
        <locationY>220</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>RequireAttachment</name>
            <fieldText>You have to attach a Contract Document before you can submit your DNC Preference for Approval.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <startElementReference>Already_submitted_for_Approval</startElementReference>
    <status>Active</status>
    <variables>
        <name>Approval_ID_2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>DNCAttachmentCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>DNCAttachmentCount1</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>DNCPreferencesID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>DNCStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
